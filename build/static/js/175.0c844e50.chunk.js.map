{"version":3,"file":"static/js/175.0c844e50.chunk.js","mappings":"2UAQQA,EAAgBC,EAAAA,EAAAA,YACXC,EAAc,SAAC,GAA2K,IAAzKC,EAAwK,EAAxKA,SAAUC,EAA8J,EAA9JA,WAAYC,EAAkJ,EAAlJA,OAAQC,EAA0I,EAA1IA,YAAaC,EAA6H,EAA7HA,eAAgBC,EAA6G,EAA7GA,YAAaC,EAAgG,EAAhGA,aAAcC,EAAkF,EAAlFA,eAAgBC,EAAkE,EAAlEA,oBAAqBC,EAA6C,EAA7CA,oBAAqBC,EAAwB,EAAxBA,kBAClKC,EAAWC,EAAAA,EAAAA,OACnB,GAA0CC,EAAAA,EAAAA,UAAS,SAAnD,eACA,GADA,WACwBA,EAAAA,EAAAA,UAAS,OAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAA8BF,EAAAA,EAAAA,UAAS,MAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAAwCJ,EAAAA,EAAAA,UAAS,MAAjD,eAAOK,EAAP,KAAqBC,EAArB,KACA,GAA0BN,EAAAA,EAAAA,WAAS,GAAnC,eAAcO,GAAd,WACA,GAA8CP,EAAAA,EAAAA,UAAS,IAAvD,eAAOQ,EAAP,KAAwBC,EAAxB,KACA,GAAoCT,EAAAA,EAAAA,UAAS,IAA7C,eAAOU,EAAP,KAAmBC,EAAnB,MACgBC,EAAAA,EAAAA,QAAO,OACvBC,EAAAA,EAAAA,YAAU,WACNzB,GACH,GAAE,KACHyB,EAAAA,EAAAA,YAAU,WACN,GAAIrB,EAAYsB,OAAS,EAAG,CAExB,IADA,IAAIC,EAAU,GACLC,EAAI,EAAGA,EAAIxB,EAAYsB,OAAS,EAAGE,IACxCxB,EAAYwB,GAAZ,IAAwBA,EAAI,EAC5BD,EAAQE,KAAKzB,EAAYwB,IAE7BP,EAAmBM,EACtB,CACJ,GAAE,CAACvB,IACJ,IAiBI0B,EAAWC,KAAKC,MAAMC,KAAKC,aAAaC,QAAQ,gBAC9CC,GAAU,CACZ,CACIC,MAAO,SACPC,UAAW,UAEf,CACID,MAAO,gBACPC,UAAW,iBAEf,CACID,MAAO,iBACPC,UAAW,kBAEf,CACID,MAAO,WACPC,UAAW,mBAEf,CACID,MAAO,mBACPC,UAAW,oBAEf,CACID,MAAO,SACPC,UAAW,qBAEf,CACID,MAAO,gBACPC,UAAW,iBAEf,CACID,MAAO,aACPE,IAAK,SACLC,OAAQ,SAACC,EAAMC,GAAP,OACJ,+BACI,SAAC,IAAD,CAAOC,KAAMD,EAAOE,aAAcC,GAAIH,EAAOE,gBAF7C,IAOVE,GAAe,CACjBC,SAAU,SAACC,EAAiBC,GAGxB,IAFA,IAAIC,EAAOD,EAEFrB,EAAI,EAAGA,EAAIsB,EAAKxB,OAAS,EAAGE,IACjCsB,EAAKtB,GAAL,WAAwB,GAE5BL,EAAc2B,EACjB,EACDC,iBAAkB,SAACT,GACf,MAAO,CACHC,KAAMD,EAAOU,OAEpB,GAoCL,OACI,4BACI,SAAC,IAAD,CAAMC,QAAStD,EAAUsC,MAAK,2BAAsBP,EAASwB,aAA/B,YAA+CxB,EAASyB,cAAxD,qCAA0GC,UAAU,EAAOC,MAAO,CAAEC,MAAO,QAAzK,UACI,UAAC,IAAD,YACI,UAAC,IAAD,CAAKC,GAAI,EAAT,WACI,iCADJ,KACiB,mBACb,SAAC,IAAD,CACIC,YAAU,EACVP,QAAS/C,EACTmD,MAAO,CAAEC,MAAO,KAChBG,YAAY,qBACZC,iBAAiB,WACjBf,SAAU,SAACgB,GAtHd,IAAClB,IAsHkCkB,EArHpD5C,GAAS,GACThB,EAAe0C,GACf7B,EAAW6B,EAmH8C,EACrCmB,aAAc,SAACC,EAAOC,GAAR,OACVA,EAAOC,MAAMC,SAASC,cAAcC,QAAQL,EAAMI,gBAAkB,CAD1D,EAPlB,SAWKpE,EAAOsE,KAAI,SAACC,GAAD,OACR,SAAC9D,EAAD,CAAQ+D,MAAOD,EAAKE,QAApB,mBAAiCF,EAAKG,OAAtC,cAAkDH,EAAKI,WAD/C,UAKpB,UAAC,IAAD,CAAKjB,GAAI,EAAT,WACI,sCADJ,MACuB,mBACnB,SAAC,IAAD,CACIC,YAAU,EACVP,QAAS9C,EACTkD,MAAO,CAAEC,MAAO,KAChBG,YAAY,4BACZC,iBAAiB,WACjBf,SAAU,SAACgB,GAnIV,IAAClB,IAmIkCkB,EAlIxD5C,GAAS,GACTd,EAAawC,GACb3B,EAAgB2B,EAgI6C,EACzCmB,aAAc,SAACC,EAAOC,GAAR,OACVA,EAAOC,MAAMC,SAASC,cAAcC,QAAQL,EAAMI,gBAAkB,CAD1D,EAPlB,SAWKnE,EAAYqE,KAAI,SAACC,GAAD,OACb,SAAC9D,EAAD,CAAQ+D,MAAOD,EAAKK,aAApB,mBAAsCL,EAAKG,SAD9B,UAKzB,UAAC,IAAD,CAAKhB,GAAI,EAAT,WACI,0CADJ,MAC2B,mBACvB,SAAC/D,EAAD,CACIkF,SAAU,CAAEC,OAAQ,SACpBA,OAAO,QACPlB,YAAa,CAAC,cAAe,YAC7Bd,SAhFxB,SAAkB0B,EAAOO,GAExB,EA+EuBC,KA9ExB,SAAcR,GACV3D,EAAQ,GAAD,OAAI2D,EAAM,GAAN,GAAJ,YAAsBA,EAAM,GAAN,GAAtB,cAA0CA,EAAM,GAAN,GAA1C,YAA4DA,EAAM,GAAN,IACtE,QA+Ee,UAAC,IAAD,CAAKd,GAAI,EAAT,WACI,mBACA,SAAC,KAAD,CAAQuB,QAAS,YAhFrB,WACZ,GAAIrE,GAAQE,GAAWE,EAAc,CAEjC,IADA,IAAIiC,EAAO,GADsB,WAExBtB,GACWN,EAAW6D,MAAK,SAACC,GAAD,OAAOA,EAAExC,eAAiBxC,EAAYwB,GAAGgB,YAAzC,KAE5BM,EAAKrB,KAAKzB,EAAYwB,GALG,EAExBA,EAAI,EAAGA,EAAKxB,EAAYsB,OAAS,EAAIE,IAAM,EAA3CA,GAOT,GAAIsB,EAAKxB,OAAS,EACd,IAAK,IAAI2D,EAAI,EAAGA,EAAKnC,EAAKxB,OAAS2D,IAC/BC,QAAQC,IAAIF,GACZnC,EAAKmC,GAAL,WAAwBG,SAASC,eAAevC,EAAKmC,GAAGzC,cAAc6B,MAG9E,IAAIiB,EAAkB,kBAAOpE,GAAe4B,GACxCyC,EAAW,CAAEC,MAAO,IAAIC,KAAQC,kBAAmB7E,EAAcJ,KAAMA,EAAMkF,UAAWhE,KAAKiE,UAAUN,IAC3GjF,EAAkBkF,EACrB,MACGM,EAAAA,EAAAA,KAAkB,CACdC,QAAS,eACTC,YACI,uEACJC,MAAM,SAAC,IAAD,CAAqB3C,MAAO,CAAE4C,MAAO,UAGtD,CAqD4CC,EAAW,EAAEC,KAAK,UAA3C,yCAMZ,SAAC,IAAD,CAAMlD,QAAS7C,GAAuBT,EAAtC,UACI,SAAC,IAAD,CACI+C,cAAY,QACRyD,KAAM,YACHzD,IAEP0D,KAAK,QACLC,YAAY,EACZrE,QAASA,GACTsE,WAAYtF,QAK/B,EAyBD,WAAeuF,EAAAA,EAAAA,KAvBS,SAACC,GAAD,MAAY,CAChC3G,OAAQ4G,EAAAA,GAAAA,UAAyBD,GACjC1G,YAAa2G,EAAAA,GAAAA,eAA8BD,GAC3CxG,YAAayG,EAAAA,GAAAA,eAA8BD,GAC3C7G,SAAU8G,EAAAA,GAAAA,YAA2BD,GACrCtG,eAAgBuG,EAAAA,GAAAA,kBAAiCD,GACjDrG,oBAAqBsG,EAAAA,GAAAA,uBAAsCD,GAC3DpG,oBAAqBqG,EAAAA,GAAAA,uBAAsCD,GAPvC,IASG,SAACE,GAAD,MAAe,CACtC9G,WAAY,WACR8G,EAASC,EAAAA,GAAAA,uBACZ,EACD5G,eAAgB,SAAC6G,GACbF,EAASC,EAAAA,GAAAA,uBAAoCC,GAChD,EACD3G,aAAc,SAAC4G,GACXH,EAASC,EAAAA,GAAAA,0BAAuCE,GACnD,EACDxG,kBAAmB,SAACyG,GAChBJ,EAASC,EAAAA,GAAAA,eAA4BG,GACxC,EAZsB,GAc3B,CAA4DpH,E,oCC1O5D,IAAeqH,EAAf,C,qCCAA,IAAeC,EAAf,C","sources":["views/asistencias/index.js","../node_modules/antd/es/col/index.js","../node_modules/antd/es/row/index.js"],"sourcesContent":["import { Button, Card, Col, Form, Input, Radio, Row, Select, Table, notification } from 'antd';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { actions as actionLogin, selectors as selectorLogin } from \"store/reducers/login\"\r\nimport { actions as actionCourse, selectors as selectorCourse } from \"store/reducers/course\"\r\nimport { DatePicker } from 'antd';\r\nimport { EditOutlined, DeleteOutlined, CloseCircleOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\n\r\nconst { RangePicker } = DatePicker;\r\nexport const Asistencias = ({ fetching, callCourse, cursos, asignaturas, callAsignatura, estudiantes, callStudents, fetchingcursos, fetchingasignaturas, fetchingestudiantes, guardarAsistencia }) => {\r\n    const { Option } = Select;\r\n    const [componentSize, setComponentSize] = useState('small');\r\n    const [hora, sethora] = useState(null);\r\n    const [cursoId, setcursoId] = useState(null);\r\n    const [asignaturaId, setasignaturaId] = useState(null);\r\n    const [curso, setcurso] = useState(false);\r\n    const [estudiantesData, setestudiantesData] = useState([]);\r\n    const [asistencia, setasistencia] = useState([]);\r\n    const formRef = useRef(null);\r\n    useEffect(() => {\r\n        callCourse()\r\n    }, [])\r\n    useEffect(() => {\r\n        if (estudiantes.length > 0) {\r\n            let newData = [];\r\n            for (let i = 0; i < estudiantes.length - 1; i++) {\r\n                estudiantes[i][\"key\"] = i + 1;\r\n                newData.push(estudiantes[i])\r\n            }\r\n            setestudiantesData(newData)\r\n        }\r\n    }, [estudiantes])\r\n    const changeCourse = (id) => {\r\n        setcurso(true);\r\n        callAsignatura(id);\r\n        setcursoId(id)\r\n    }\r\n    const changeAsignatura = (id) => {\r\n        setcurso(true);\r\n        callStudents(id);\r\n        setasignaturaId(id)\r\n    }\r\n    const onFormLayoutChange = ({ size }) => {\r\n        setComponentSize(size);\r\n    };\r\n    const onSubmit = values => {\r\n\r\n    };\r\n\r\n    let dataUser = JSON.parse(atob(localStorage.getItem(\"auth_token\")))\r\n    const columns = [\r\n        {\r\n            title: 'Cedula',\r\n            dataIndex: 'cedula',\r\n        },\r\n        {\r\n            title: 'Primer Nombre',\r\n            dataIndex: 'primer_nombre',\r\n        },\r\n        {\r\n            title: 'Segundo Nombre',\r\n            dataIndex: 'segundo_nombre',\r\n        },\r\n        {\r\n            title: 'Apellido',\r\n            dataIndex: 'primer_apellido',\r\n        },\r\n        {\r\n            title: 'Segundo Apellido',\r\n            dataIndex: 'segundo_apellido',\r\n        },\r\n        {\r\n            title: 'Correo',\r\n            dataIndex: 'correo_estudiante',\r\n        },\r\n        {\r\n            title: 'Representante',\r\n            dataIndex: 'representante',\r\n        },\r\n        {\r\n            title: 'Comentario',\r\n            key: 'action',\r\n            render: (text, record) => (\r\n                <>\r\n                    <Input name={record.idEstudiante} id={record.idEstudiante} />\r\n                </>\r\n            )\r\n        }\r\n    ];\r\n    const rowSelection = {\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n            let data = selectedRows;\r\n            // console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n            for (let i = 0; i < data.length - 1; i++) {\r\n                data[i][\"comentario\"] = \"\";\r\n            }\r\n            setasistencia(data)\r\n        },\r\n        getCheckboxProps: (record) => {\r\n            return {\r\n                name: record.cedula,\r\n            }\r\n        },\r\n    };\r\n    function onChange(value, dateString) {\r\n\r\n    }\r\n    function onOk(value) {\r\n        sethora(`${value[0][\"$H\"]}:${value[0][\"$m\"]} - ${value[1][\"$H\"]}:${value[1][\"$m\"]}`)\r\n    }\r\n    const guardar = () => {\r\n        if (hora && cursoId && asignaturaId) {\r\n            let data = [];\r\n            for (let i = 0; i < (estudiantes.length - 1); i++) {\r\n                let otherData = asistencia.find((x) => x.idEstudiante === estudiantes[i].idEstudiante);\r\n                if (!otherData) {\r\n                    data.push(estudiantes[i])\r\n                }\r\n            }\r\n\r\n            if (data.length > 0) {\r\n                for (let j = 0; j < (data.length); j++) {\r\n                    console.log(j);\r\n                    data[j][\"comentario\"] = document.getElementById(data[j].idEstudiante).value;\r\n                }\r\n            }\r\n            let dataSendAsistencia = [...asistencia, ...data];\r\n            let sendData = { fecha: new Date(), fkCursoAsistencia: asignaturaId, hora: hora, registros: JSON.stringify(dataSendAsistencia) }\r\n            guardarAsistencia(sendData)\r\n        } else {\r\n            notification.open({\r\n                message: 'Faltan datos',\r\n                description:\r\n                    'Por favor ingrese todos los datos para poder registrar la asistencia',\r\n                icon: <CloseCircleOutlined style={{ color: 'red' }} />,\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <Card loading={fetching} title={`Estimado docente ${dataUser.PRI_NOM_USER} ${dataUser.PRIM_APE_USER} seleccione su curso y asignatura`} bordered={false} style={{ width: \"100%\" }}>\r\n                <Row>\r\n                    <Col lg={6}>\r\n                        <b>Curso</b> <br />\r\n                        <Select\r\n                            showSearch\r\n                            loading={fetchingcursos}\r\n                            style={{ width: 300 }}\r\n                            placeholder=\"Seleccione Materia\"\r\n                            optionFilterProp=\"children\"\r\n                            onChange={(e) => { changeCourse(e); }}\r\n                            filterOption={(input, option) =>\r\n                                option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                            }\r\n                        >\r\n                            {cursos.map((item) => (\r\n                                <Option value={item.idCurso}>{`${item.nombre} - ${item.paralelo}`}</Option>\r\n                            ))}\r\n                        </Select>\r\n                    </Col>\r\n                    <Col lg={6}>\r\n                        <b>Asignatura</b>  <br />\r\n                        <Select\r\n                            showSearch\r\n                            loading={fetchingasignaturas}\r\n                            style={{ width: 300 }}\r\n                            placeholder=\"Seleccione una asignatura\"\r\n                            optionFilterProp=\"children\"\r\n                            onChange={(e) => { changeAsignatura(e); }}\r\n                            filterOption={(input, option) =>\r\n                                option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                            }\r\n                        >\r\n                            {asignaturas.map((item) => (\r\n                                <Option value={item.idAsignatura}>{`${item.nombre}`}</Option>\r\n                            ))}\r\n                        </Select>\r\n                    </Col>\r\n                    <Col lg={6}>\r\n                        <b>Hora de clases</b>  <br />\r\n                        <RangePicker\r\n                            showTime={{ format: 'HH:mm' }}\r\n                            format=\"HH:mm\"\r\n                            placeholder={['Hora inicio', 'Hora fin']}\r\n                            onChange={onChange}\r\n                            onOk={onOk}\r\n                        />\r\n                    </Col>\r\n                    <Col lg={6}>\r\n                        <br />\r\n                        <Button onClick={() => { guardar() }} type='primary' >Guardar Asistencia</Button>\r\n                    </Col>\r\n                </Row>\r\n\r\n\r\n            </Card>\r\n            <Card loading={fetchingestudiantes || fetching}>\r\n                <Table\r\n                    rowSelection={{\r\n                        type: \"checkbox\",\r\n                        ...rowSelection,\r\n                    }}\r\n                    size=\"small\"\r\n                    pagination={false}\r\n                    columns={columns}\r\n                    dataSource={estudiantesData}\r\n                />\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    cursos: selectorCourse.getcursos(state),\r\n    asignaturas: selectorCourse.getasignaturas(state),\r\n    estudiantes: selectorCourse.getestudiantes(state),\r\n    fetching: selectorCourse.getFetching(state),\r\n    fetchingcursos: selectorCourse.getFetchingcursos(state),\r\n    fetchingasignaturas: selectorCourse.getFetchingasignaturas(state),\r\n    fetchingestudiantes: selectorCourse.getFetchingestudiantes(state),\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    callCourse: () => {\r\n        dispatch(actionCourse.GetCourseWithTeacher());\r\n    },\r\n    callAsignatura: (curso) => {\r\n        dispatch(actionCourse.GetAsignaturaWithCurso(curso));\r\n    },\r\n    callStudents: (asignatura) => {\r\n        dispatch(actionCourse.GetStudentsWithAsignatura(asignatura));\r\n    },\r\n    guardarAsistencia: (dataAsistencia) => {\r\n        dispatch(actionCourse.sendAsistencia(dataAsistencia));\r\n    }\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Asistencias)\r\n","import { Col } from '../grid';\nexport default Col;","import { Row } from '../grid';\nexport default Row;"],"names":["RangePicker","DatePicker","Asistencias","fetching","callCourse","cursos","asignaturas","callAsignatura","estudiantes","callStudents","fetchingcursos","fetchingasignaturas","fetchingestudiantes","guardarAsistencia","Option","Select","useState","hora","sethora","cursoId","setcursoId","asignaturaId","setasignaturaId","setcurso","estudiantesData","setestudiantesData","asistencia","setasistencia","useRef","useEffect","length","newData","i","push","dataUser","JSON","parse","atob","localStorage","getItem","columns","title","dataIndex","key","render","text","record","name","idEstudiante","id","rowSelection","onChange","selectedRowKeys","selectedRows","data","getCheckboxProps","cedula","loading","PRI_NOM_USER","PRIM_APE_USER","bordered","style","width","lg","showSearch","placeholder","optionFilterProp","e","filterOption","input","option","props","children","toLowerCase","indexOf","map","item","value","idCurso","nombre","paralelo","idAsignatura","showTime","format","dateString","onOk","onClick","find","x","j","console","log","document","getElementById","dataSendAsistencia","sendData","fecha","Date","fkCursoAsistencia","registros","stringify","notification","message","description","icon","color","guardar","type","size","pagination","dataSource","connect","state","selectorCourse","dispatch","actionCourse","curso","asignatura","dataAsistencia","Col","Row"],"sourceRoot":""}