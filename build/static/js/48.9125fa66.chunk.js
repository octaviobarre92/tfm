"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[48],{2048:function(e,r,n){n.r(r),n.d(r,{Students:function(){return k},default:function(){return E}});var t=n(9439),s=n(2791),o=n(6090),a=n(2999),i=n(4378),l=n(7615),d=n(2835),u=n(1717),c=n(7309),m=n(4424),p=n(364),g=n(4988),x=n(4089),h=n(7128),f=n(5761),Z=(n(8937),n(1413)),j=n(1990),b=n(2426),v=n.n(b),I=n(8944),C=n(184),S=function(e){var r=e.updateStudent,n=e.item,u=e.setItem,c=e.showModal,m=e.setShowModal,p=e.cursos,g=(0,s.useState)("small"),x=(0,t.Z)(g,2),h=x[0],f=x[1],b=(0,s.useRef)(null);(0,s.useEffect)((function(){}),[]);var v=a.Z.Option;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(j.Z,{title:"Actualizacion de estudiante",open:c,width:"60%",okText:"Actualizar",onOk:function(){b.current.submit()},onCancel:function(){u(null),m(!c)},cancelText:"Cancelar",children:(0,C.jsx)(i.Z,{loading:!n,children:(0,C.jsxs)(l.Z,{ref:b,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",initialValues:(0,Z.Z)((0,Z.Z)({},n),{},{size:h}),onValuesChange:function(e){var r=e.size;f(r)},size:h,onFinish:function(e){r((0,Z.Z)((0,Z.Z)({},e),{},{idEstudiante:n.idEstudiante})),o.Z.open({message:"Exitoso!",description:"Estudiante actualizado correctamente, puedes visualizarlo en el apartado de Listado",icon:(0,C.jsx)(I.Z,{style:{color:"#108ee9"}})}),u(null),m(!c)},children:[(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese un n\xfamero de c\xe9dula"}],name:"cedula",label:"Cedula",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el primer nombre del estudiante"}],name:"primer_nombre",label:"Primer Nombre",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el segundo nombre del estudiante"}],name:"segundo_nombre",label:"Segundo Nombre",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el primer apellido del estudiante"}],name:"primer_apellido",label:"Primer Apellido",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el segundo apellido del estudiante"}],name:"segundo_apellido",label:"Segundo Apellido",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el nombre completo del representante"}],name:"representante",label:"Representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el correo electronico del representante"},{type:"email",message:"Ingrese un correo electr\xf3nico valido!"}],name:"correo_representante",label:"Correo de representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{name:"telefono_representante",label:"Telefono de representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{name:"direccion",label:"Direcci\xf3n",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el correo electronico del estudiante"},{type:"email",message:"Ingrese un correo electr\xf3nico valido!"}],name:"correo_estudiante",label:"Correo de estudiante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor seleccione la fecha de nacimiento"}],name:"fecha_nacimiento",label:"Fecha de nacimiento",children:(0,C.jsx)(d.Z,{type:"date"})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor seleccione un curso"}],name:"fkCurso",label:"Curso",children:(0,C.jsx)(a.Z,{showSearch:!0,style:{width:200},placeholder:"Seleccione un curso",optionFilterProp:"children",filterOption:function(e,r){return r.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return(0,C.jsx)(v,{value:e.idCurso,children:"".concat(e.nombre," - ").concat(e.paralelo)})}))})})]})})})})},P=n(1752),_=n(2622),w=n(1532),y=(0,p.$j)((function(e){return{dataStudents:g.wl.getDataStudents(e),isFetching:g.wl.getFetching(e),statusDelete:x.wl.getStatusDelete(e)}}),(function(e){return{getStudents:function(){e(g.Nw.loadStudentsAll())},updateStudent:function(r){e(g.Nw.updateStudent(r))},deleteData:function(r,n,t){e(x.Nw.deleteData(r,n,t))}}}))((function(e){var r=e.getStudents,n=e.updateStudent,a=e.dataStudents,l=e.isFetching,d=e.cursos,u=e.deleteData,c=e.statusDelete,m=(0,s.useState)(!1),p=(0,t.Z)(m,2),g=p[0],x=p[1],Z=(0,s.useState)(null),j=(0,t.Z)(Z,2),b=j[0],v=j[1],y=[{title:"Curso",dataIndex:"curso",key:"curso"},{title:"Cedula",dataIndex:"cedula",key:"cedula"},{title:"Primer Nombre",dataIndex:"primer_nombre",key:"primer_nombre"},{title:"Segundo Nombre",dataIndex:"segundo_nombre",key:"segundo_nombre"},{title:"Primer Apellido",dataIndex:"primer_apellido",key:"primer_apellido"},{title:"Segundo Apellido",dataIndex:"segundo_apellido",key:"segundo_apellido"},{title:"Telefono de representante",dataIndex:"telefono_representante",key:"telefono_representante"},{title:"Correo de representante",dataIndex:"correo_representante",key:"correo_representante"},{title:"Action",key:"action",render:function(e,r){return(0,C.jsxs)("span",{children:[(0,C.jsx)(P.Z,{onClick:function(){q(r)}}),(0,C.jsx)(h.Z,{type:"vertical"}),(0,C.jsx)(_.Z,{onClick:function(){k(r)},style:{color:"red"}})]})}}];(0,s.useEffect)((function(){r()}),[]),(0,s.useEffect)((function(){"ERROR"===c&&o.Z.open({message:"Error al eliminar este estudiante",description:"Este estudiante tiene asistencias registradas por lo cual no puede ser eliminado, contacte con el Administrador",icon:(0,C.jsx)(w.Z,{style:{color:"red"}})}),"ELIMINADO"===c&&(o.Z.open({message:"Eliminado correctamente",description:"Se elimino el estudiante de forma exitosa!",icon:(0,C.jsx)(I.Z,{style:{color:"#108ee9"}})}),r())}),[c]);var q=function(e){v(e),x(!g)},k=function(e){u("estudiantes","idEstudiante",e.idEstudiante)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.Z,{loading:l,children:(0,C.jsx)(f.Z,{columns:y,dataSource:a})}),b&&(0,C.jsx)(S,{cursos:d,item:b,setItem:v,updateStudent:n,showModal:g,setShowModal:x})]})})),q=n(9075),k=function(e){var r=e.saveStudent,n=e.isFetching,p=(e.isFetchingCourse,e.cursos),g=e.loadCursos,x=(0,s.useState)("registro"),h=(0,t.Z)(x,2),f=h[0],Z=h[1],j=(0,s.useState)("small"),b=(0,t.Z)(j,2),S=b[0],P=b[1];(0,s.useEffect)((function(){g()}),[]);var _=function(e){var r=e.size;P(r)},w=function(e){e.fecha_nacimiento=v()(e.fecha_nacimiento).format(),r(e),o.Z.open({message:"Exitoso!",description:"Estudiante registrado correctamente, puedes visualizarlo en el apartado de Listado",icon:(0,C.jsx)(I.Z,{style:{color:"#108ee9"}})})},q=a.Z.Option,k=function(){return(0,C.jsx)(i.Z,{loading:n,children:(0,C.jsxs)(l.Z,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",initialValues:{size:S},onValuesChange:_,size:S,onFinish:w,children:[(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese un n\xfamero de c\xe9dula"}],name:"cedula",label:"Cedula",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el primer nombre del estudiante"}],name:"primer_nombre",label:"Primer Nombre",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el segundo nombre del estudiante"}],name:"segundo_nombre",label:"Segundo Nombre",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el primer apellido del estudiante"}],name:"primer_apellido",label:"Primer Apellido",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el segundo apellido del estudiante"}],name:"segundo_apellido",label:"Segundo Apellido",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el nombre completo del representante"}],name:"representante",label:"Representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el correo electronico del representante"},{type:"email",message:"Ingrese un correo electr\xf3nico valido!"}],name:"correo_representante",label:"Correo de representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{name:"telefono_representante",label:"Telefono de representante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{name:"direccion",label:"Direcci\xf3n",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor ingrese el correo electronico del estudiante"},{type:"email",message:"Ingrese un correo electr\xf3nico valido!"}],name:"correo_estudiante",label:"Correo de estudiante",children:(0,C.jsx)(d.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor seleccione la fecha de nacimiento"}],name:"fecha_nacimiento",label:"Fecha de nacimiento",children:(0,C.jsx)(u.Z,{})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:"Por favor seleccione un curso"}],name:"fkCurso",label:"Curso",children:(0,C.jsx)(a.Z,{showSearch:!0,style:{width:200},placeholder:"Seleccione un curso",optionFilterProp:"children",filterOption:function(e,r){return r.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return(0,C.jsx)(q,{value:e.idCurso,children:"".concat(e.nombre," - ").concat(e.paralelo)})}))})}),(0,C.jsx)(l.Z.Item,{children:(0,C.jsx)(c.ZP,{type:"primary",htmlType:"submit",children:"Guardar Estudiante"})})]})})};return(0,C.jsx)("div",{children:(0,C.jsxs)(i.Z,{title:"Estudiantes",bordered:!1,style:{width:"100%"},children:[(0,C.jsxs)(m.ZP.Group,{onChange:function(e){Z(e.target.value)},value:f,style:{marginBottom:8},children:[(0,C.jsx)(m.ZP.Button,{value:"registro",children:"Registro"}),(0,C.jsx)(m.ZP.Button,{value:"list",children:"Listado"})]}),"registro"===f&&p.length>0&&(0,C.jsx)(k,{}),"list"===f&&(0,C.jsx)(y,{cursos:p})]})})},E=(0,p.$j)((function(e){return{isFetching:g.wl.getFetching(e),isFetchingCursos:q.wl.getFetching(e),cursos:q.wl.getdataCourse(e)}}),(function(e){return{saveStudent:function(r){e(g.Nw.saveStudents(r))},loadCursos:function(){e(q.Nw.loadCourseAll())}}}))(k)}}]);
//# sourceMappingURL=48.9125fa66.chunk.js.map