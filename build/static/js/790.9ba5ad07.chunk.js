"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[790],{6790:function(e,t,n){n.r(t),n.d(t,{Reportes:function(){return S},default:function(){return A}});n(3433);var a=n(9439),i=n(2999),s=n(7309),r=(n(6090),n(4378)),l=n(6106),c=n(914),o=n(5761),u=n(2791),d=n(364),h=(n(4089),n(9075)),g=n(1717),f=(n(1532),n(2426),n(1990)),p=(n(4988),n(184)),x=function(e){var t,n=e.estudianteSelect,i=e.asignaturaId,s=e.asignaturas,l=e.dataAsistencias,c=e.showModal,d=e.setshowModal,h=(0,u.useState)("small"),g=(0,a.Z)(h,2),x=(g[0],g[1],[{title:"Fecha de asistencia",dataIndex:"fechaCreacion"},{title:"Hora",dataIndex:"hora"},{title:"Comentario",dataIndex:"comentario"},{title:"Asistencia",render:function(e,t){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("p",{style:{backgroundColor:0===t.estadoAsistencia?"green":"red",color:"white",textAlign:"center",borderRadius:"8px"},children:0===t.estadoAsistencia?"Asisti\xf3":"Inasisti\xf3"})})}}]);return n&&0===s.length?null:(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(f.Z,{title:(0,p.jsxs)("b",{children:["Asistencias de la asignatura ",s.length>0&&i?null===(t=s.find((function(e){return e.idAsignatura===i})))||void 0===t?void 0:t.nombre:null," ",(0,p.jsx)("br",{}),(0,p.jsxs)("p",{children:["Estudiante ",n&&n.primer_nombre+" "+n.segundo_apellido+" - "+n.cedula]})]}),open:c,width:"60%",okText:"Aceptar",onOk:function(){d(!c)},onCancel:function(){d(!c)},cancelText:"Cancelar",children:(0,p.jsx)(r.Z,{loading:!1,children:(0,p.jsx)(o.Z,{size:"small",pagination:!1,columns:x,dataSource:l})})})})},w=n(1167),S=(g.Z.RangePicker,function(e){var t=e.dataTeacher,n=e.isFetchingTeacher,d=e.getTeachers,h=e.GetAsistenciaPorEstudiante,g=e.dataAsistencias,f=(e.fetchingAsistencias,e.fetching),w=e.callCourse,S=e.cursos,A=e.asignaturas,m=e.callAsignatura,j=e.estudiantes,Z=e.callStudents,C=e.fetchingcursos,b=e.fetchingasignaturas,E=e.fetchingestudiantes,I=(e.guardarAsistencia,JSON.parse(atob(localStorage.getItem("auth_token")))),_=i.Z.Option,R=(0,u.useState)("small"),T=(0,a.Z)(R,2),P=(T[0],T[1],(0,u.useState)(null)),F=(0,a.Z)(P,2),v=(F[0],F[1],(0,u.useState)("TEACHER"===I.TIPO_USER&&I.ID_USER||null)),O=(0,a.Z)(v,2),k=O[0],N=O[1],y=(0,u.useState)(null),M=(0,a.Z)(y,2),U=(M[0],M[1]),G=(0,u.useState)(null),L=(0,a.Z)(G,2),D=L[0],H=L[1],W=(0,u.useState)(!1),z=(0,a.Z)(W,2),V=(z[0],z[1]),J=(0,u.useState)(!1),$=(0,a.Z)(J,2),q=$[0],B=$[1],K=(0,u.useState)(null),Q=(0,a.Z)(K,2),X=Q[0],Y=Q[1],ee=(0,u.useState)([]),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,u.useState)([]),se=(0,a.Z)(ie,2);se[0],se[1],(0,u.useRef)(null);(0,u.useEffect)((function(){d(),"TEACHER"===I.TIPO_USER&&w(I.ID_USER)}),[]),(0,u.useEffect)((function(){ae(j)}),[j]);var re=[{title:"Cedula",dataIndex:"cedula"},{title:"Primer Nombre",dataIndex:"primer_nombre"},{title:"Segundo Nombre",dataIndex:"segundo_nombre"},{title:"Apellido",dataIndex:"primer_apellido"},{title:"Segundo Apellido",dataIndex:"segundo_apellido"},{title:"Correo",dataIndex:"correo_estudiante"},{title:"Representante",dataIndex:"representante"},{title:"",key:"action",render:function(e,t){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.ZP,{name:t.idEstudiante,id:t.idEstudiante,onClick:function(){le(t)},type:"default",children:"Ver detalle"})})}}],le=function(e){h(e),B(!0),Y(e)};return(0,p.jsxs)("div",{children:[(0,p.jsx)(r.Z,{loading:f,title:"Estimado usuario ".concat(I.PRI_NOM_USER," ").concat(I.PRIM_APE_USER," seleccione el profesor, curso y asignatura"),bordered:!1,style:{width:"100%"},children:(0,p.jsxs)(l.Z,{children:[(0,p.jsxs)(c.Z,{lg:6,children:[(0,p.jsx)("b",{children:"Profesor"})," ",(0,p.jsx)("br",{}),(0,p.jsx)(i.Z,{showSearch:!0,loading:n,style:{width:300},placeholder:"Seleccione Materia",optionFilterProp:"children",defaultValue:"TEACHER"===I.TIPO_USER&&I.ID_USER,onChange:function(e){w(e),N(e)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:t.map((function(e){return(0,p.jsx)(_,{value:e.id,children:"".concat(e.cedula," - ").concat(e.primer_nombre," ").concat(e.primer_apellido)})}))})]}),(0,p.jsxs)(c.Z,{lg:6,children:[(0,p.jsx)("b",{children:"Curso"})," ",(0,p.jsx)("br",{}),S&&S.length>0&&(0,p.jsx)(i.Z,{showSearch:!0,disabled:S&&0===S.length,loading:C,style:{width:300},placeholder:"Seleccione Materia",optionFilterProp:"children",onChange:function(e){var t;t=e,V(!0),m(t,k),U(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:S.map((function(e){return(0,p.jsx)(_,{value:e.idCurso,children:"".concat(e.nombre," - ").concat(e.paralelo)})}))})]}),(0,p.jsxs)(c.Z,{lg:6,children:[(0,p.jsx)("b",{children:"Asignatura"}),"  ",(0,p.jsx)("br",{}),A&&A.length>0&&(0,p.jsx)(i.Z,{showSearch:!0,disabled:A&&0===A.length,loading:b,style:{width:300},placeholder:"Seleccione una asignatura",optionFilterProp:"children",onChange:function(e){var t;t=e,V(!0),Z(t,k),H(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:A.map((function(e){return(0,p.jsx)(_,{value:e.idAsignatura,children:"".concat(e.nombre)})}))})]})]})}),(0,p.jsx)(r.Z,{loading:E||f,children:(0,p.jsx)(o.Z,{size:"small",pagination:!1,columns:re,dataSource:ne})}),(0,p.jsx)(x,{dataAsistencias:g,asignaturas:A,estudianteSelect:X,asignaturaId:D,showModal:q,setshowModal:B})]})}),A=(0,d.$j)((function(e){return{cursos:h.wl.getcursos(e),asignaturas:h.wl.getasignaturas(e),estudiantes:h.wl.getestudiantes(e),fetching:h.wl.getFetching(e),fetchingcursos:h.wl.getFetchingcursos(e),fetchingasignaturas:h.wl.getFetchingasignaturas(e),fetchingestudiantes:h.wl.getFetchingestudiantes(e),dataAsistencias:h.wl.getAsistencias(e),fetchingAsistencias:h.wl.getFetchingAsistencia(e),dataTeacher:w.wl.getDataTeachers(e),isFetchingTeacher:w.wl.getFetching(e)}}),(function(e){return{GetAsistenciaPorEstudiante:function(t){e(h.Nw.GetAsistenciaPorEstudiante(t))},getTeachers:function(){e(w.Nw.loadTeachersAll())},callCourse:function(t){e(h.Nw.GetCourseWithTeacher(t))},callAsignatura:function(t,n){e(h.Nw.GetAsignaturaWithCurso(t,n))},callStudents:function(t,n){e(h.Nw.GetStudentsWithAsignatura(t,n))},guardarAsistencia:function(t){e(h.Nw.sendAsistencia(t))}}}))(S)},914:function(e,t,n){var a=n(9752);t.Z=a.Z},6106:function(e,t,n){var a=n(7545);t.Z=a.Z}}]);
//# sourceMappingURL=790.9ba5ad07.chunk.js.map