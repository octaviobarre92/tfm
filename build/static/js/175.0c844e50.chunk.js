"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[175],{6175:function(e,t,n){n.r(t),n.d(t,{Asistencias:function(){return S}});var a=n(1413),i=n(3433),r=n(9439),s=n(2999),o=n(2835),c=n(6090),l=n(4378),u=n(6106),d=n(914),g=n(7309),h=n(5761),f=n(2791),p=n(364),m=(n(4089),n(9075)),x=n(1717),Z=n(1532),j=n(184),w=x.Z.RangePicker,S=function(e){var t=e.fetching,n=e.callCourse,p=e.cursos,m=e.asignaturas,x=e.callAsignatura,S=e.estudiantes,C=e.callStudents,b=e.fetchingcursos,v=e.fetchingasignaturas,A=e.fetchingestudiantes,k=e.guardarAsistencia,y=s.Z.Option,E=(0,f.useState)("small"),I=(0,r.Z)(E,2),P=(I[0],I[1],(0,f.useState)(null)),_=(0,r.Z)(P,2),H=_[0],N=_[1],O=(0,f.useState)(null),F=(0,r.Z)(O,2),R=F[0],$=F[1],G=(0,f.useState)(null),L=(0,r.Z)(G,2),M=L[0],W=L[1],J=(0,f.useState)(!1),T=(0,r.Z)(J,2),U=(T[0],T[1]),z=(0,f.useState)([]),B=(0,r.Z)(z,2),D=B[0],q=B[1],K=(0,f.useState)([]),Q=(0,r.Z)(K,2),V=Q[0],X=Q[1];(0,f.useRef)(null);(0,f.useEffect)((function(){n()}),[]),(0,f.useEffect)((function(){if(S.length>0){for(var e=[],t=0;t<S.length-1;t++)S[t].key=t+1,e.push(S[t]);q(e)}}),[S]);var Y=JSON.parse(atob(localStorage.getItem("auth_token"))),ee=[{title:"Cedula",dataIndex:"cedula"},{title:"Primer Nombre",dataIndex:"primer_nombre"},{title:"Segundo Nombre",dataIndex:"segundo_nombre"},{title:"Apellido",dataIndex:"primer_apellido"},{title:"Segundo Apellido",dataIndex:"segundo_apellido"},{title:"Correo",dataIndex:"correo_estudiante"},{title:"Representante",dataIndex:"representante"},{title:"Comentario",key:"action",render:function(e,t){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(o.Z,{name:t.idEstudiante,id:t.idEstudiante})})}}],te={onChange:function(e,t){for(var n=t,a=0;a<n.length-1;a++)n[a].comentario="";X(n)},getCheckboxProps:function(e){return{name:e.cedula}}};return(0,j.jsxs)("div",{children:[(0,j.jsx)(l.Z,{loading:t,title:"Estimado docente ".concat(Y.PRI_NOM_USER," ").concat(Y.PRIM_APE_USER," seleccione su curso y asignatura"),bordered:!1,style:{width:"100%"},children:(0,j.jsxs)(u.Z,{children:[(0,j.jsxs)(d.Z,{lg:6,children:[(0,j.jsx)("b",{children:"Curso"})," ",(0,j.jsx)("br",{}),(0,j.jsx)(s.Z,{showSearch:!0,loading:b,style:{width:300},placeholder:"Seleccione Materia",optionFilterProp:"children",onChange:function(e){var t;t=e,U(!0),x(t),$(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return(0,j.jsx)(y,{value:e.idCurso,children:"".concat(e.nombre," - ").concat(e.paralelo)})}))})]}),(0,j.jsxs)(d.Z,{lg:6,children:[(0,j.jsx)("b",{children:"Asignatura"}),"  ",(0,j.jsx)("br",{}),(0,j.jsx)(s.Z,{showSearch:!0,loading:v,style:{width:300},placeholder:"Seleccione una asignatura",optionFilterProp:"children",onChange:function(e){var t;t=e,U(!0),C(t),W(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:m.map((function(e){return(0,j.jsx)(y,{value:e.idAsignatura,children:"".concat(e.nombre)})}))})]}),(0,j.jsxs)(d.Z,{lg:6,children:[(0,j.jsx)("b",{children:"Hora de clases"}),"  ",(0,j.jsx)("br",{}),(0,j.jsx)(w,{showTime:{format:"HH:mm"},format:"HH:mm",placeholder:["Hora inicio","Hora fin"],onChange:function(e,t){},onOk:function(e){N("".concat(e[0].$H,":").concat(e[0].$m," - ").concat(e[1].$H,":").concat(e[1].$m))}})]}),(0,j.jsxs)(d.Z,{lg:6,children:[(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{onClick:function(){!function(){if(H&&R&&M){for(var e=[],t=function(t){V.find((function(e){return e.idEstudiante===S[t].idEstudiante}))||e.push(S[t])},n=0;n<S.length-1;n++)t(n);if(e.length>0)for(var a=0;a<e.length;a++)console.log(a),e[a].comentario=document.getElementById(e[a].idEstudiante).value;var r=[].concat((0,i.Z)(V),e),s={fecha:new Date,fkCursoAsistencia:M,hora:H,registros:JSON.stringify(r)};k(s)}else c.Z.open({message:"Faltan datos",description:"Por favor ingrese todos los datos para poder registrar la asistencia",icon:(0,j.jsx)(Z.Z,{style:{color:"red"}})})}()},type:"primary",children:"Guardar Asistencia"})]})]})}),(0,j.jsx)(l.Z,{loading:A||t,children:(0,j.jsx)(h.Z,{rowSelection:(0,a.Z)({type:"checkbox"},te),size:"small",pagination:!1,columns:ee,dataSource:D})})]})};t.default=(0,p.$j)((function(e){return{cursos:m.wl.getcursos(e),asignaturas:m.wl.getasignaturas(e),estudiantes:m.wl.getestudiantes(e),fetching:m.wl.getFetching(e),fetchingcursos:m.wl.getFetchingcursos(e),fetchingasignaturas:m.wl.getFetchingasignaturas(e),fetchingestudiantes:m.wl.getFetchingestudiantes(e)}}),(function(e){return{callCourse:function(){e(m.Nw.GetCourseWithTeacher())},callAsignatura:function(t){e(m.Nw.GetAsignaturaWithCurso(t))},callStudents:function(t){e(m.Nw.GetStudentsWithAsignatura(t))},guardarAsistencia:function(t){e(m.Nw.sendAsistencia(t))}}}))(S)},914:function(e,t,n){var a=n(9752);t.Z=a.Z},6106:function(e,t,n){var a=n(7545);t.Z=a.Z}}]);
//# sourceMappingURL=175.0c844e50.chunk.js.map