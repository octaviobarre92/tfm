"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[175],{6175:function(e,t,n){n.r(t),n.d(t,{Asistencias:function(){return b}});var a=n(1413),i=n(3433),s=n(9439),r=n(2999),o=n(2835),c=n(6090),l=n(4378),u=n(6106),d=n(914),g=n(7309),h=n(5761),f=n(2791),m=n(364),p=(n(4089),n(9075)),x=n(1717),Z=n(1532),j=n(8944),w=n(2426),C=n.n(w),S=n(184),v=x.Z.RangePicker,b=function(e){var t=e.fetching,n=e.callCourse,m=e.cursos,p=e.asignaturas,x=e.callAsignatura,j=e.estudiantes,w=e.callStudents,b=e.fetchingcursos,A=e.fetchingasignaturas,k=e.fetchingestudiantes,y=e.guardarAsistencia,E=r.Z.Option,H=(0,f.useState)("small"),I=(0,s.Z)(H,2),N=(I[0],I[1],(0,f.useState)(null)),O=(0,s.Z)(N,2),P=O[0],_=O[1],F=(0,f.useState)(null),R=(0,s.Z)(F,2),M=R[0],L=R[1],$=(0,f.useState)(null),z=(0,s.Z)($,2),G=z[0],Y=z[1],D=(0,f.useState)(!1),W=(0,s.Z)(D,2),B=(W[0],W[1]),J=(0,f.useState)([]),T=(0,s.Z)(J,2),U=T[0],q=T[1],K=(0,f.useState)([]),Q=(0,s.Z)(K,2),V=Q[0],X=Q[1];(0,f.useRef)(null);(0,f.useEffect)((function(){n(),q([])}),[]),(0,f.useEffect)((function(){if(j.length>0){for(var e=[],t=0;t<j.length;t++)j[t].key=t+1,j[t].estadoAsistencia=0,e.push(j[t]);q(e)}}),[j]);var ee=JSON.parse(atob(localStorage.getItem("auth_token"))),te=[{title:"Cedula",dataIndex:"cedula"},{title:"Primer Nombre",dataIndex:"primer_nombre"},{title:"Segundo Nombre",dataIndex:"segundo_nombre"},{title:"Apellido",dataIndex:"primer_apellido"},{title:"Segundo Apellido",dataIndex:"segundo_apellido"},{title:"Correo",dataIndex:"correo_estudiante"},{title:"Representante",dataIndex:"representante"},{title:"Comentario",key:"action",render:function(e,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(o.Z,{name:t.idEstudiante,id:t.idEstudiante})})}}],ne={onChange:function(e,t){for(var n=t,a=0;a<n.length-1;a++)n[a].comentario="";X(n)},getCheckboxProps:function(e){return{name:e.cedula}}};return(0,S.jsxs)("div",{children:[(0,S.jsx)(l.Z,{loading:t,title:"Estimado docente ".concat(ee.PRI_NOM_USER," ").concat(ee.PRIM_APE_USER," seleccione su curso y asignatura"),bordered:!1,style:{width:"100%"},children:(0,S.jsxs)(u.Z,{children:[(0,S.jsxs)(d.Z,{lg:6,children:[(0,S.jsx)("b",{children:"Curso"})," ",(0,S.jsx)("br",{}),(0,S.jsx)(r.Z,{showSearch:!0,loading:b,style:{width:300},placeholder:"Seleccione Materia",optionFilterProp:"children",onChange:function(e){var t;t=e,B(!0),x(t),L(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:m.map((function(e){return(0,S.jsx)(E,{value:e.idCurso,children:"".concat(e.nombre," - ").concat(e.paralelo)})}))})]}),(0,S.jsxs)(d.Z,{lg:6,children:[(0,S.jsx)("b",{children:"Asignatura"}),"  ",(0,S.jsx)("br",{}),(0,S.jsx)(r.Z,{showSearch:!0,loading:A,style:{width:300},placeholder:"Seleccione una asignatura",optionFilterProp:"children",onChange:function(e){var t;t=e,B(!0),w(t),Y(t)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:p.map((function(e){return(0,S.jsx)(E,{value:e.idAsignatura,children:"".concat(e.nombre)})}))})]}),(0,S.jsxs)(d.Z,{lg:6,children:[(0,S.jsx)("b",{children:"Hora de clases"}),"  ",(0,S.jsx)("br",{}),(0,S.jsx)(v,{showTime:{format:"HH:mm"},format:"HH:mm",placeholder:["Hora inicio","Hora fin"],onChange:function(e,t){},onOk:function(e){_("".concat(e[0].$H,":").concat(e[0].$m," - ").concat(e[1].$H,":").concat(e[1].$m))}})]}),(0,S.jsxs)(d.Z,{lg:6,children:[(0,S.jsx)("br",{}),(0,S.jsx)(g.ZP,{onClick:function(){!function(){if(P&&M&&G){for(var e=[],t=function(t){V.find((function(e){return e.idEstudiante===U[t].idEstudiante}))||e.push(U[t])},n=0;n<U.length;n++)t(n);if(e.length>0)for(var a=0;a<e.length;a++)e[a].comentario=document.getElementById(e[a].idEstudiante).value,e[a].estadoAsistencia=1;var s=[].concat((0,i.Z)(V),e),r={fecha:C()(new Date).format("YYYY-MM-DD HH:mm:ss"),fkCursoAsistencia:G,hora:P,registros:JSON.stringify(s)};y(r),q([])}else c.Z.open({message:"Faltan datos",description:"Por favor ingrese todos los datos para poder registrar la asistencia",icon:(0,S.jsx)(Z.Z,{style:{color:"red"}})})}()},type:"primary",children:"Guardar Asistencia"})]})]})}),(0,S.jsx)(l.Z,{loading:k||t,children:(0,S.jsx)(h.Z,{rowSelection:(0,a.Z)({type:"checkbox"},ne),size:"small",pagination:!1,columns:te,dataSource:U})})]})};t.default=(0,m.$j)((function(e){return{cursos:p.wl.getcursos(e),asignaturas:p.wl.getasignaturas(e),estudiantes:p.wl.getestudiantes(e),fetching:p.wl.getFetching(e),fetchingcursos:p.wl.getFetchingcursos(e),fetchingasignaturas:p.wl.getFetchingasignaturas(e),fetchingestudiantes:p.wl.getFetchingestudiantes(e)}}),(function(e){return{callCourse:function(){e(p.Nw.GetCourseWithTeacher())},callAsignatura:function(t){e(p.Nw.GetAsignaturaWithCurso(t))},callStudents:function(t){e(p.Nw.GetStudentsWithAsignatura(t))},guardarAsistencia:function(t){e(p.Nw.sendAsistencia(t)),c.Z.open({message:"Exitoso!",description:"Asistencias registradas de forma exitosa!",icon:(0,S.jsx)(j.Z,{style:{color:"#108ee9"}})})}}}))(b)},8944:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(1413),i=n(2791),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},r=n(4291),o=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:s}))};o.displayName="CheckCircleOutlined";var c=i.forwardRef(o)},914:function(e,t,n){var a=n(9752);t.Z=a.Z},6106:function(e,t,n){var a=n(7545);t.Z=a.Z}}]);
//# sourceMappingURL=175.e45d79d4.chunk.js.map